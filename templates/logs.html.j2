{% set this_page = "logs" %}
{% extends "templates/layout.html.j2" %}

{% block title %}MQTT | MeshInfo{% endblock %}

{% block content %}
<div class="container pt-3">
  <h5>MQTT Messages</h5>
  <p class="mb-2">
    All messages received by MQTT. Only the messages received
    since this server was last restarted are shown.
  </p>
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col" style="min-width:180px">Timestamp</th>
          <th scope="col">Topic</th>
          <th scope="col" style="word-wrap: break-word;max-width: 300px;">Message</th>
        </tr>
      </thead>
      <tbody>
        {% for message in logs %}
        <tr>
          <td>
            {% if message.ts_created %}
            {{ datetime.fromtimestamp(message.ts_created).strftime('%Y-%m-%d %H:%M:%S') }}
            {% endif %}
          </td>
          <td>
            {{ message.topic }}
          </td>
          <td style="word-break: break-all">{{ message.message }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}